# 本机服务部署配置
# 连接到现有的PostgreSQL/Redis等服务
# 复制此文件为 .env 并填入你的配置

# === GitHub API配置 ===
GITHUB_TOKENS=ghp_your_token_1,ghp_your_token_2,ghp_your_token_3

# === 外部数据库配置 ===
# 支持 postgres 或 sqlite
STORAGE_TYPE=postgres

# PostgreSQL配置 (当STORAGE_TYPE=postgres时)
POSTGRES_HOST=your-postgres-host.com
POSTGRES_PORT=5432
POSTGRES_USER=your_db_user
POSTGRES_PASSWORD=your_db_password
POSTGRES_DATABASE=kooix_hajimi
POSTGRES_SSL_MODE=require
POSTGRES_MAX_OPEN_CONNECTIONS=50
POSTGRES_MAX_IDLE_CONNECTIONS=10
POSTGRES_CONNECTION_MAX_LIFETIME=1h

# SQLite配置 (当STORAGE_TYPE=sqlite时)
SQLITE_PATH=/app/data/kooix_hajimi.db

# === 外部Redis配置 (可选) ===
REDIS_ENABLED=true
REDIS_HOST=your-redis-host.com
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0
REDIS_MAX_IDLE=10
REDIS_MAX_ACTIVE=100
REDIS_IDLE_TIMEOUT=240s

# === 代理配置 (可选) ===
# 如果有外部代理服务器
PROXY=socks5://your-proxy-host:1080
# 或使用本地WARP (需要启用warp profile)
# PROXY=socks5://warp:1080

# === 应用配置 ===
# Gemini模型
HAJIMI_CHECK_MODEL=gemini-2.5-flash

# Web服务
WEB_ENABLED=true
WEB_PORT=8080
WEB_HOST=0.0.0.0
WEB_READ_TIMEOUT=30s
WEB_WRITE_TIMEOUT=30s

# 扫描配置
SCANNER_WORKER_COUNT=10
SCANNER_SCAN_INTERVAL=1h
SCANNER_BATCH_SIZE=200

# 速率限制
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=20
RATE_LIMIT_ADAPTIVE_ENABLED=true
RATE_LIMIT_SUCCESS_THRESHOLD=0.8
RATE_LIMIT_BACKOFF_MULTIPLIER=1.5
RATE_LIMIT_COOLDOWN_DURATION=2m

# 验证器配置
VALIDATOR_WORKER_COUNT=5
VALIDATOR_TIMEOUT=30s
VALIDATOR_BATCH_SIZE=10

# 查询和过滤
QUERIES_FILE=queries.txt
DATE_RANGE_DAYS=730
FILE_BLACKLIST=readme,docs,doc/,.md,example,sample,tutorial,test,spec,demo,mock

# 监控配置
METRICS_ENABLED=true
METRICS_PORT=9090
HEALTH_CHECK_ENABLED=true

# 日志配置
LOG_LEVEL=info
LOG_FORMAT=json
LOG_OUTPUT=stdout

# === 可选服务配置 ===
# WARP代理 (如果启用 warp-local profile)
WARP_PORT=1080
WARP_LICENSE_KEY=your_warp_plus_license

# Prometheus (如果启用 monitoring profile)
PROMETHEUS_PORT=9091

# Grafana (如果启用 monitoring profile)
GRAFANA_PORT=3000
GRAFANA_ADMIN_PASSWORD=your_grafana_password

# === 外部同步配置 ===
GEMINI_BALANCER_SYNC_ENABLED=false
GEMINI_BALANCER_URL=https://your-gemini-balancer.com
GEMINI_BALANCER_AUTH=your_auth_token

GPT_LOAD_SYNC_ENABLED=false
GPT_LOAD_URL=https://your-gpt-load.com
GPT_LOAD_AUTH=your_auth_token
GPT_LOAD_GROUP_NAME=group1,group2

# === 安全配置 ===
API_SECRET_KEY=your_very_secure_api_secret_key
JWT_SECRET_KEY=your_jwt_secret_key
WEB_ADMIN_USERNAME=admin
WEB_ADMIN_PASSWORD=your_secure_password

# === 资源限制 ===
APP_MEMORY_LIMIT=1G
APP_CPU_LIMIT=1.0
APP_MEMORY_RESERVATION=512M
APP_CPU_RESERVATION=0.5